exports.id=567,exports.ids=[567],exports.modules={8359:()=>{},3739:()=>{},2897:(e,t,a)=>{let s={"335416c852e4351f6b071da0c449797609cd3529":()=>Promise.resolve().then(a.bind(a,4581)).then(e=>e.getAnalytics),"35c11c197751039da8f79a890078abb74d092a65":()=>Promise.resolve().then(a.bind(a,4581)).then(e=>e.fetchAllUsers),"6727771b2df0b010539eaed6952ef9332cfce98a":()=>Promise.resolve().then(a.bind(a,4581)).then(e=>e.checkLimitAndGenerate),"835ec64ccae7930043818c24f422beb902ac9d78":()=>Promise.resolve().then(a.bind(a,4581)).then(e=>e.toggleUserBan),"91099f875fa14361579487b40c54bb06a8dc24eb":()=>Promise.resolve().then(a.bind(a,4581)).then(e=>e.updateUserLimit),a83cafce4865bcea7adfb375bae692f6cb61af35:()=>Promise.resolve().then(a.bind(a,4581)).then(e=>e.loginUser),defd6a130648ded6c12e094a7abfe2a206ba3421:()=>Promise.resolve().then(a.bind(a,4581)).then(e=>e.adminLogin)};async function r(e,...t){return(await s[e]()).apply(null,t)}e.exports={"335416c852e4351f6b071da0c449797609cd3529":r.bind(null,"335416c852e4351f6b071da0c449797609cd3529"),"35c11c197751039da8f79a890078abb74d092a65":r.bind(null,"35c11c197751039da8f79a890078abb74d092a65"),"6727771b2df0b010539eaed6952ef9332cfce98a":r.bind(null,"6727771b2df0b010539eaed6952ef9332cfce98a"),"835ec64ccae7930043818c24f422beb902ac9d78":r.bind(null,"835ec64ccae7930043818c24f422beb902ac9d78"),"91099f875fa14361579487b40c54bb06a8dc24eb":r.bind(null,"91099f875fa14361579487b40c54bb06a8dc24eb"),a83cafce4865bcea7adfb375bae692f6cb61af35:r.bind(null,"a83cafce4865bcea7adfb375bae692f6cb61af35"),defd6a130648ded6c12e094a7abfe2a206ba3421:r.bind(null,"defd6a130648ded6c12e094a7abfe2a206ba3421")}},1840:(e,t,a)=>{Promise.resolve().then(a.bind(a,8425))},3124:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2583,23)),Promise.resolve().then(a.t.bind(a,6840,23)),Promise.resolve().then(a.t.bind(a,8771,23)),Promise.resolve().then(a.t.bind(a,3225,23)),Promise.resolve().then(a.t.bind(a,9295,23)),Promise.resolve().then(a.t.bind(a,3982,23))},8151:(e,t,a)=>{"use strict";a.d(t,{$g:()=>i,Bk:()=>o,IH:()=>c,Ip:()=>l,Qc:()=>d,pH:()=>n,w6:()=>r}),a(3664);var s=a(8371),r=(0,s.$)("835ec64ccae7930043818c24f422beb902ac9d78"),n=(0,s.$)("a83cafce4865bcea7adfb375bae692f6cb61af35"),i=(0,s.$)("defd6a130648ded6c12e094a7abfe2a206ba3421"),l=(0,s.$)("6727771b2df0b010539eaed6952ef9332cfce98a"),c=(0,s.$)("335416c852e4351f6b071da0c449797609cd3529"),d=(0,s.$)("35c11c197751039da8f79a890078abb74d092a65"),o=(0,s.$)("91099f875fa14361579487b40c54bb06a8dc24eb")},7377:(e,t,a)=>{"use strict";a.d(t,{Z:()=>w});var s=a(5344),r=a(3729),n=a(8151),i=a(7958),l=a(3024),c=a(340),d=a(4963),o=a(9895),m=a(9200),x=a(6064),h=a(5904),u=a(8534),b=a(895),g=a(5786),f=a(8765),p=a(1498),y=a(141),v=a(4538);let w=({onBack:e})=>{let[t,a]=(0,r.useState)(!1),[w,N]=(0,r.useState)(""),[j,k]=(0,r.useState)(!1),[E,A]=(0,r.useState)("overview"),[I,C]=(0,r.useState)([]),[S,R]=(0,r.useState)(null),[T,_]=(0,r.useState)(""),[D,U]=(0,r.useState)(null),[P,z]=(0,r.useState)(1),$=async e=>{e.preventDefault(),k(!0),(await (0,n.$g)(w)).success?(a(!0),O()):alert("Invalid Admin Password"),k(!1)},O=async()=>{k(!0);let[e,t]=await Promise.all([(0,n.Qc)(),(0,n.IH)()]);C(e),R(t),k(!1)},L=async(e,t)=>{await (0,n.w6)(e,!t),O()},M=async e=>{await (0,n.Bk)(e,P),U(null),O()};if(!t)return s.jsx("div",{className:"flex flex-col items-center justify-center h-full bg-ios-bg dark:bg-black p-6 animate-fade-in",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-[#1C1C1E] p-8 rounded-3xl shadow-xl w-full max-w-sm text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-900 text-white rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:s.jsx(i.Z,{size:32})}),s.jsx("h2",{className:"text-2xl font-bold mb-2 dark:text-white",children:"Admin Access"}),s.jsx("p",{className:"text-gray-500 mb-6 text-sm",children:"Enter secure credentials to proceed."}),(0,s.jsxs)("form",{onSubmit:$,className:"space-y-4",children:[s.jsx("input",{type:"password",value:w,onChange:e=>N(e.target.value),className:"w-full p-4 bg-gray-100 dark:bg-zinc-800 rounded-xl outline-none focus:ring-2 ring-gray-900 dark:text-white",placeholder:"Admin Password"}),s.jsx("button",{type:"submit",disabled:j,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-black font-bold py-4 rounded-xl",children:j?s.jsx(v.Z,{size:"sm",color:"text-current"}):"Unlock Dashboard"})]}),s.jsx("button",{onClick:e,className:"mt-6 text-sm text-gray-500 hover:underline",children:"Return to App"})]})});let G=I.filter(e=>e.name.toLowerCase().includes(T.toLowerCase()));return(0,s.jsxs)("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-black animate-fade-in",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-[#1C1C1E] border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between sticky top-0 z-20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:e,className:"p-2 -ml-2 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-full transition-colors dark:text-white",children:s.jsx(l.Z,{size:20})}),s.jsx("h1",{className:"text-xl font-bold dark:text-white",children:"Admin Console"})]}),(0,s.jsxs)("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>A("overview"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${"overview"===E?"bg-white dark:bg-zinc-600 shadow-sm dark:text-white":"text-gray-500"}`,children:"Overview"}),s.jsx("button",{onClick:()=>A("users"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${"users"===E?"bg-white dark:bg-zinc-600 shadow-sm dark:text-white":"text-gray-500"}`,children:"Users"})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["overview"===E&&S&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(c.Z,{size:24,className:"text-ios-teal"}),"System Intelligence Report"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Real-time analytics & performance metrics"})]}),s.jsx("button",{onClick:()=>O(),className:"p-2 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-full transition-colors",children:s.jsx(d.Z,{size:20,className:"text-gray-600 dark:text-gray-400 hover:text-ios-teal transit-colors"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 via-blue-600 to-cyan-600 p-6 rounded-3xl text-white shadow-xl hover:shadow-2xl transition-all border border-white/20",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 opacity-90 mb-1",children:[s.jsx(o.Z,{size:16}),s.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Active Users"})]}),s.jsx("p",{className:"text-4xl font-bold mt-1",children:S.totalUsers}),(0,s.jsxs)("p",{className:"text-xs opacity-75 mt-1",children:["+",Math.floor(5*Math.random())," new this week"]})]}),s.jsx("div",{className:"text-3xl opacity-30",children:"\uD83D\uDC65"})]}),s.jsx("div",{className:"mt-3 pt-3 border-t border-white/20",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs font-medium opacity-90",children:[s.jsx(m.Z,{size:12})," Growing community"]})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 via-purple-600 to-pink-600 p-6 rounded-3xl text-white shadow-xl hover:shadow-2xl transition-all border border-white/20",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 opacity-90 mb-1",children:[s.jsx(x.Z,{size:16}),s.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Total Flyers"})]}),s.jsx("p",{className:"text-4xl font-bold mt-1",children:S.totalGenerations}),s.jsx("p",{className:"text-xs opacity-75 mt-1",children:"Spiritual reflections created"})]}),s.jsx("div",{className:"text-3xl opacity-30",children:"âœ¨"})]}),s.jsx("div",{className:"mt-3 pt-3 border-t border-white/20",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs font-medium opacity-90",children:[s.jsx(h.Z,{size:12})," Collections shared"]})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-500 via-emerald-600 to-teal-600 p-6 rounded-3xl text-white shadow-xl hover:shadow-2xl transition-all border border-white/20",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 opacity-90 mb-1",children:[s.jsx(u.Z,{size:16}),s.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Active Today"})]}),s.jsx("p",{className:"text-4xl font-bold mt-1",children:S.activeToday}),(0,s.jsxs)("p",{className:"text-xs opacity-75 mt-1",children:[Math.round(S.activeToday/Math.max(S.totalUsers,1)*100),"% engagement rate"]})]}),s.jsx("div",{className:"text-3xl opacity-30",children:"\uD83D\uDD25"})]}),s.jsx("div",{className:"mt-3 pt-3 border-t border-white/20",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs font-medium opacity-90",children:[s.jsx(m.Z,{size:12})," Daily active usage"]})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-red-500 via-orange-600 to-red-700 p-6 rounded-3xl text-white shadow-xl hover:shadow-2xl transition-all border border-white/20",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 opacity-90 mb-1",children:[s.jsx(b.Z,{size:16}),s.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Account Status"})]}),s.jsx("p",{className:"text-4xl font-bold mt-1",children:S.bannedUsers}),(0,s.jsxs)("p",{className:"text-xs opacity-75 mt-1",children:["Suspended ",S.bannedUsers>0?"account(s)":"account"]})]}),s.jsx("div",{className:"text-3xl opacity-30",children:"\uD83D\uDEAB"})]}),s.jsx("div",{className:"mt-3 pt-3 border-t border-white/20",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs font-medium opacity-90",children:[s.jsx(g.Z,{size:12})," 99.5% healthy"]})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3 bg-white dark:bg-[#1C1C1E] rounded-2xl p-4 border border-gray-100 dark:border-zinc-800 shadow-sm",children:[(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase font-bold mb-1",children:"Avg Gens/User"}),s.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:Math.round(S.totalGenerations/Math.max(S.totalUsers,1))})]}),(0,s.jsxs)("div",{className:"text-center border-l border-r border-gray-200 dark:border-zinc-700",children:[s.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase font-bold mb-1",children:"Engagement %"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-ios-teal",children:[Math.round(S.activeToday/Math.max(S.totalUsers,1)*100),"%"]})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase font-bold mb-1",children:"Health Score"}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:"100/100"})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-[#1C1C1E] rounded-2xl border border-gray-100 dark:border-zinc-800 overflow-hidden shadow-sm",children:[(0,s.jsxs)("div",{className:"p-5 border-b border-gray-100 dark:border-zinc-800 bg-gradient-to-r from-gray-50 to-white dark:from-zinc-800 dark:to-[#1C1C1E]",children:[(0,s.jsxs)("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(u.Z,{size:18,className:"text-ios-teal"}),"Live Generation Feed"]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Last 10 reflections created"})]}),s.jsx("div",{className:"divide-y divide-gray-100 dark:divide-zinc-800 max-h-96 overflow-y-auto",children:S.recentGenerations&&S.recentGenerations.length>0?S.recentGenerations.map((e,t)=>(0,s.jsxs)("div",{className:"p-4 flex items-start justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors group",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-ios-teal to-cyan-500 flex items-center justify-center text-white text-xs font-bold flex-shrink-0",children:t+1}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:e.user_name}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:["\uD83D\uDCD6 Topic: ",(0,s.jsxs)("span",{className:"font-medium text-ios-teal",children:['"',e.topic,'"']})]})]})]}),(0,s.jsxs)("div",{className:"text-right flex-shrink-0 ml-4",children:[s.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-500 font-mono",children:new Date(e.created_at).toLocaleTimeString()}),s.jsx("p",{className:"text-[9px] text-gray-400 mt-1",children:new Date(e.created_at).toLocaleDateString()})]})]},e.id)):s.jsx("div",{className:"p-8 text-center",children:s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No recent activity"})})})]})]}),"users"===E&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(o.Z,{size:24,className:"text-ios-teal"}),"User Management"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Manage user accounts, limits, and permissions"})]}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx(f.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search users by name...",value:T,onChange:e=>_(e.target.value),className:"w-full bg-white dark:bg-[#1C1C1E] pl-12 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-800 outline-none focus:ring-2 ring-ios-blue dark:text-white transition-all"})]}),s.jsx("div",{className:"bg-white dark:bg-[#1C1C1E] rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-white dark:from-zinc-800/50 dark:to-[#1C1C1E] text-xs uppercase text-gray-600 dark:text-gray-400 font-bold border-b border-gray-100 dark:border-zinc-800",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"p-4",children:"User"}),s.jsx("th",{className:"p-4",children:"Performance"}),s.jsx("th",{className:"p-4",children:"Daily Limit"}),s.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-zinc-800",children:G.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-zinc-800/30 transition-colors group",children:[s.jsx("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-ios-teal to-cyan-500 flex items-center justify-center text-white text-sm font-bold",children:e.name.charAt(0).toUpperCase()}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ...",e.id.slice(-6)]})]})]})}),s.jsx("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["\uD83D\uDD25 ",e.streak]}),s.jsx("span",{className:"text-[10px] text-gray-500",children:"day streak"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Total: ",e.generation_count]}),s.jsx("div",{className:"w-20 h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-ios-teal to-cyan-500",style:{width:`${Math.min(e.generation_count/50*100,100)}%`}})})]})]})}),s.jsx("td",{className:"p-4",children:D===e.id?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",value:P,onChange:e=>z(parseInt(e.target.value)),className:"w-16 p-2 bg-gray-100 dark:bg-zinc-700 rounded border border-gray-300 dark:border-zinc-600 text-sm dark:text-white font-bold"}),s.jsx("button",{onClick:()=>M(e.id),className:"text-green-600 dark:text-green-400 hover:scale-110 transition-transform",children:s.jsx(p.Z,{size:18})})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"font-mono bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/30 dark:to-cyan-900/30 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-lg text-sm font-bold",children:[e.rate_limit_override||1," gen/day"]}),s.jsx("button",{onClick:()=>{U(e.id),z(e.rate_limit_override||1)},className:"text-gray-400 hover:text-blue-500 hover:scale-110 transition-all opacity-0 group-hover:opacity-100",children:s.jsx(y.Z,{size:16})})]})}),s.jsx("td",{className:"p-4 text-right",children:s.jsx("button",{onClick:()=>L(e.id,e.is_banned),className:`px-3 py-2 rounded-lg font-medium text-sm transition-all ${e.is_banned?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 hover:bg-red-200":"text-gray-600 dark:text-gray-400 hover:bg-red-100 dark:hover:bg-red-900/30 hover:text-red-600"}`,children:e.is_banned?"Unban":"Ban"})})]},e.id))})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3 bg-gray-50 dark:bg-zinc-800/30 rounded-xl p-4",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-[10px] text-gray-600 dark:text-gray-400 uppercase font-bold mb-1",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:G.length})]}),(0,s.jsxs)("div",{className:"border-l border-r border-gray-200 dark:border-zinc-700 px-4",children:[s.jsx("p",{className:"text-[10px] text-gray-600 dark:text-gray-400 uppercase font-bold mb-1",children:"Active"}),s.jsx("p",{className:"text-2xl font-bold text-ios-teal",children:G.filter(e=>!e.is_banned).length})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-[10px] text-gray-600 dark:text-gray-400 uppercase font-bold mb-1",children:"Banned"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:G.filter(e=>e.is_banned).length})]})]})]})]})]})}},4538:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(5344);a(3729);var r=a(2739);let n=({size:e="md",color:t="text-primary-600",label:a})=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsx(r.Z,{className:`animate-spin ${{sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16"}[e]} ${t}`,"aria-label":"Loading"}),a&&s.jsx("span",{className:"text-sm font-medium text-gray-500 animate-pulse",children:a})]})},8425:(e,t,a)=>{"use strict";a.r(t),a.d(t,{PWARegistration:()=>r});var s=a(3729);function r(){return(0,s.useEffect)(()=>{},[]),null}},4581:(e,t,a)=>{"use strict";a.r(t),a.d(t,{adminLogin:()=>u,checkLimitAndGenerate:()=>b,fetchAllUsers:()=>f,getAnalytics:()=>g,loginUser:()=>h,toggleUserBan:()=>y,updateUserLimit:()=>p});var s=a(8601);a(5811);var r=a(6612),n=a(1471),i=a(9899),l=a(6747),c=a(6113),d=a(6893);process.env.ADMIN_USER;let o=process.env.ADMIN_PASSWORD,m=new TextEncoder().encode(process.env.JWT_SECRET||"default-secret-key-change-me"),x=e=>(0,c.createHash)("sha256").update(e).digest("hex");async function h(e,t){let a=await r.default.connect();try{let s=x(t),n=await a.query("SELECT * FROM users WHERE lower(name) = lower($1)",[e]);if(n.rows.length>0){let e=n.rows[0];if(e.pin_hash!==s)return{success:!1,error:"Incorrect PIN."};if(e.is_banned)return{success:!1,error:"Account suspended."};let t=await a.query("UPDATE users SET last_login = NOW() WHERE id = $1 RETURNING *",[e.id]);return{success:!0,user:(0,r.safeUser)(t.rows[0])}}{let t=await a.query("INSERT INTO users (name, pin_hash, role) VALUES ($1, $2, 'user') RETURNING *",[e,s]);return{success:!0,user:(0,r.safeUser)(t.rows[0])}}}catch(e){return console.error("Login Error",e),{success:!1,error:"Database Connection Failed"}}finally{a.release()}}async function u(e){return e===o?{success:!0,token:await new n.SignJWT({role:"admin"}).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("2h").sign(m)}:{success:!1}}async function b(e,t,a,s){let n=await r.default.connect();try{let c=(await n.query("SELECT * FROM users WHERE id = $1",[e])).rows[0];if(!c)return{success:!1,error:"User not found"};if(c.is_banned)return{success:!1,error:"User is banned"};let d=c.rate_limit_override||1,o=new Date,m=await n.query(`SELECT COUNT(*) FROM generations 
       WHERE user_id = $1 AND created_at::date = CURRENT_DATE`,[e]);if(parseInt(m.rows[0].count)>=d&&"admin"!==c.role)return{success:!1,error:"Daily limit reached."};let x=await (0,l.generateMessage)(t,a,s);if(!x.success)return x;await n.query("BEGIN");let h=c.streak;if(c.last_generation_date){let e=new Date(c.last_generation_date),t=(0,i.differenceInCalendarDays)(o,e);1===t?h++:t>1&&(h=1)}else h=1;let u=await n.query(`UPDATE users SET 
        last_generation_date = NOW(), 
        generation_count = generation_count + 1,
        streak = $1
       WHERE id = $2 RETURNING *`,[h,e]);return await n.query("INSERT INTO generations (user_id, topic) VALUES ($1, $2)",[e,t]),await n.query("COMMIT"),{success:!0,text:x.text,user:(0,r.safeUser)(u.rows[0]),error:void 0}}catch(e){return await n.query("ROLLBACK"),console.error("Gen Error",e),{success:!1,error:"System Error"}}finally{n.release()}}async function g(){let e=await r.default.connect();try{let t=await e.query("SELECT COUNT(*) FROM users"),a=await e.query("SELECT COUNT(*) FROM generations"),s=await e.query("SELECT COUNT(DISTINCT user_id) FROM generations WHERE created_at::date = CURRENT_DATE"),r=await e.query("SELECT COUNT(*) FROM users WHERE is_banned = true"),n=await e.query(`
        SELECT g.id, g.topic, g.created_at, u.name as user_name 
        FROM generations g 
        JOIN users u ON g.user_id = u.id 
        ORDER BY g.created_at DESC LIMIT 10
    `);return{totalUsers:parseInt(t.rows[0].count),totalGenerations:parseInt(a.rows[0].count),activeToday:parseInt(s.rows[0].count),bannedUsers:parseInt(r.rows[0].count),recentGenerations:n.rows.map(e=>({...e,created_at:e.created_at.toISOString()}))}}finally{e.release()}}async function f(){let e=await r.default.connect();try{return(await e.query("SELECT * FROM users ORDER BY last_login DESC LIMIT 100")).rows.map(r.safeUser)}finally{e.release()}}async function p(e,t){let a=await r.default.connect();try{return await a.query("UPDATE users SET rate_limit_override = $1 WHERE id = $2",[t,e]),{success:!0}}catch(e){return{success:!1}}finally{a.release()}}async function y(e,t){let a=await r.default.connect();try{return await a.query("UPDATE users SET is_banned = $1 WHERE id = $2",[t,e]),{success:!0}}finally{a.release()}}(0,d.ensureServerEntryExports)([h,u,b,g,f,p,y]),(0,s.createActionProxy)("a83cafce4865bcea7adfb375bae692f6cb61af35",h),(0,s.createActionProxy)("defd6a130648ded6c12e094a7abfe2a206ba3421",u),(0,s.createActionProxy)("6727771b2df0b010539eaed6952ef9332cfce98a",b),(0,s.createActionProxy)("335416c852e4351f6b071da0c449797609cd3529",g),(0,s.createActionProxy)("35c11c197751039da8f79a890078abb74d092a65",f),(0,s.createActionProxy)("91099f875fa14361579487b40c54bb06a8dc24eb",p),(0,s.createActionProxy)("835ec64ccae7930043818c24f422beb902ac9d78",y)},4607:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y,metadata:()=>f,viewport:()=>p});var s=a(5036),r=a(569),n=a.n(r),i=a(38),l=a.n(i),c=a(3998),d=a.n(c),o=a(2894),m=a.n(o);a(2);var x=a(6843);let h=(0,x.createProxy)(String.raw`/workspaces/ramadanbot/components/PWARegistration.tsx`),{__esModule:u,$$typeof:b}=h;h.default;let g=(0,x.createProxy)(String.raw`/workspaces/ramadanbot/components/PWARegistration.tsx#PWARegistration`);a(7272);let f={title:"Ramadan Bot - AI Spiritual Companion",description:"Generate personalized daily Ramadan reflections grounded in authentic Islamic teachings. Create beautiful shareable flyers and track your spiritual journey.",manifest:"/manifest.json",keywords:["Ramadan","Islamic","Reflection","Flyer","Muslim","Spirituality","AI"],authors:[{name:"Abdallah Nangere"}],creator:"Abdallah Nangere",openGraph:{type:"website",locale:"en_US",url:"https://ramadanbot.com",siteName:"Ramadan Bot",title:"Ramadan Bot - AI Spiritual Companion",description:"Generate personalized daily Ramadan reflections grounded in authentic Islamic teachings.",images:[{url:"/icon-512x512.png",width:512,height:512,alt:"Ramadan Bot Logo"}]},twitter:{card:"summary_large_image",title:"Ramadan Bot - AI Spiritual Companion",description:"Generate personalized daily Ramadan reflections",images:["/icon-512x512.png"]},appleWebApp:{capable:!0,statusBarStyle:"black-translucent",title:"Ramadan Bot"},formatDetection:{telephone:!1}},p={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,viewportFit:"cover",themeColor:"#000000"};function y({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsxs)("head",{children:[s.jsx("meta",{name:"mobile-web-app-capable",content:"yes"}),s.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),s.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"}),s.jsx("meta",{name:"apple-mobile-web-app-title",content:"Ramadan Bot"}),s.jsx("link",{rel:"manifest",href:"/manifest.json"}),s.jsx("link",{rel:"icon",href:"/icon.png",type:"image/png"}),s.jsx("link",{rel:"apple-touch-icon",href:"/icon-192x192.png"}),s.jsx("meta",{name:"theme-color",content:"#0f766e"}),s.jsx("meta",{name:"description",content:"Generate personalized daily Ramadan reflections grounded in authentic Islamic teachings."})]}),(0,s.jsxs)("body",{className:`${n().variable} ${l().variable} ${d().variable} ${m().variable} antialiased bg-black flex justify-center items-center h-screen w-screen overflow-hidden`,style:{backgroundColor:"#000000",color:"#ffffff"},children:[s.jsx(g,{}),e]})]})}},6612:(e,t,a)=>{"use strict";a.d(t,{default:()=>s,safeUser:()=>r});let s=new(a(5900)).Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}}),r=e=>({id:e.id,name:e.name,role:e.role,streak:e.streak,generation_count:e.generation_count,last_login:e.last_login?.toISOString(),last_generation_date:e.last_generation_date?.toISOString()||null,rate_limit_override:e.rate_limit_override,is_banned:e.is_banned,created_at:e.created_at?.toISOString()})},6747:(e,t,a)=>{"use strict";a.d(t,{generateMessage:()=>i});var s=a(8601);a(5811);var r=a(2835),n=a(6893);let i=async(e,t,a)=>{try{let s=process.env.GEMINI_API_KEY||process.env.API_KEY;if(!s)return console.error("API Key missing. Please set GEMINI_API_KEY in your environment variables."),{success:!1,error:"Configuration Error: API Key missing."};let n=new r.GoogleGenAI({apiKey:s}),i=`You are a learned Islamic scholar and hafiz of the Quran, deeply knowledgeable in Hadith and the Sunnah of the Prophet Muhammad (peace be upon him). You craft exquisite Ramadan daily reflections with flawless grammar and profound spiritual meaning. Your responses are grounded exclusively in Quranic verses, authenticated hadiths, and the teachings of the righteous predecessors.

TOPIC: "${e}"
RAMADAN DAY: ${t}
${a?`REFERENCE: ${a}`:""}

QUALITY STANDARDS:
1. GRAMMAR AND PUNCTUATION: Absolutely flawless. Every sentence must be grammatically perfect with proper English punctuation.
2. MEANINGFUL SUBSTANCE: Every word carries spiritual weight. No filler. Each concept connects directly to the virtue of Ramadan and the topic.
3. FLOWING COHERENCE: Sentences flow naturally. Ideas build upon one another, creating a coherent spiritual message that resonates with the soul.
4. AUTHENTIC ISLAMIC GROUNDING: Root all reflections in specific Quranic verses, authenticated Hadiths from Sahih collections, or teachings of the Sunnah. Never philosophical abstraction.
5. DIRECT QURANIC LANGUAGE: Reference Allah specifically (never "God," "the divine," or abstract terms). Use Islamic terminology naturally: Taqwa, Ihsan, Sabr, Shukr, Dua, Rahmah, Tawhid, Deen, Akhirah.
6. BREVITY WITH DEPTH: 150-250 characters exactly. Concise yet substantive, using 2-3 sentences maximum.
7. TONE: Solemn, inspirational, profoundly reflective. Connect the message to day ${t} of Ramadan's spiritual journey.
8. NO SPECIAL CHARACTERS: Do not use asterisks, bullet points, checkmarks, or any markdown formatting. Write in pure, clean prose.

STRUCTURE (MANDATORY):
- Opening: Islamic principle rooted in the Quran or authentic Sunnah about "${e}"
- Middle: A specific Quranic truth or verified Prophetic hadith that illuminates this virtue
- Closing: A direct, actionable spiritual call to embody this principle on day ${t} of Ramadan
- All sentences must connect naturally with no abrupt transitions

ISLAMIC AUTHENTICITY GUIDELINES:
- If referencing the Quran, ground your reflection in the actual meaning and context of the verse
- If citing the Prophet's teachings, ensure they reflect authentic Sunnah (from Sahih collections preferred)
- Emphasize the connection between obedience, spiritual growth, and drawing near to Allah
- Avoid any cultural or philosophical additions; remain purely within Islamic tradition
- Acknowledge that Ramadan is a month of mercy, forgiveness, and divine guidance

EXAMPLE PERFECT REFLECTIONS (150-250 characters, flawless grammar, no special characters):
- "Allah commands us in the Quran: seek His mercy and forgiveness. Ramadan is the month when the gates of paradise are opened; on day ${t}, let us purify our hearts through sincere repentance and devotion to His remembrance."
- "The Prophet taught that fasting is a shield against the fire of Hell. On this blessed day, let us guard our hearts, our tongues, and our actions so that our fast becomes a fortress protecting us in this life and the next."
- "Taqwa is the garment of the pious, and Ramadan is the season to strengthen it. When we abstain from the permissible for the sake of Allah, we build unshakeable God consciousness that protects our faith and our souls."

VERIFICATION CHECK before responding:
- Is the core message grounded in Quranic truth or authentic Sunnah?
- Would a learned Islamic scholar recognize this as authentic Islamic teaching?
- Does it strengthen the reader's connection to Allah and their faith on day ${t}?
- Is the grammar absolutely perfect with no errors?
- Are there any asterisks, bullet points, or special characters? (There should be none)
- Does it naturally flow in 2-3 connected sentences?
- Is the character count between 150-250?

Now compose ONE sacred reflection on "${e}" for Ramadan Day ${t}. It must be grounded in Quran and Sunnah, with perfect grammar, perfect punctuation, perfect Islamic meaning, and flowing connected sentences. Include no special characters or formatting:`,l=await n.models.generateContent({model:"gemini-2.5-flash-lite",contents:i}),c=l.text?.trim();if(!c)return{success:!1,error:"Empty response from AI."};return{success:!0,text:c}}catch(e){return console.error("Gemini Generation Error:",e),{success:!1,error:"Failed to generate message. Please try again."}}};(0,n.ensureServerEntryExports)([i]),(0,s.createActionProxy)("49de9fee48f39fc709eba99822f0781913cbc2f6",i)},9899:(e,t,a)=>{"use strict";a.d(t,{differenceInCalendarDays:()=>s.differenceInCalendarDays});var s=a(9247)},7272:()=>{}};